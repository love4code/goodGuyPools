<%- include('../partials/admin-header', { title: 'Services', currentPage: 'services' }) %>
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="h4 mb-0">Services</h2>
  <a href="/admin/services/new" class="btn btn-primary">New Service</a>
</div>
<div class="table-responsive">
  <table class="table align-middle">
    <thead>
      <tr>
        <th>Icon</th>
        <th>Name</th>
        <th>Short Description</th>
        <th>Description</th>
        <th>Order</th>
        <th>Created</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% if (services && services.length) { %> <% services.forEach(s => { %>
      <tr>
        <td><% if (s.icon) { %><i class="bi <%= s.icon %>" style="font-size: 1.5rem;"></i><% } %></td>
        <td><%= s.name || s.title %></td>
        <td class="text-truncate" style="max-width: 200px">
          <%= s.shortDescription || '-' %>
        </td>
        <td class="text-truncate" style="max-width: 300px">
          <%= s.description || '-' %>
        </td>
        <td><%= s.order %></td>
        <td><%= new Date(s.createdAt).toLocaleDateString() %></td>
        <td class="text-end">
          <a
            href="/admin/services/<%= s._id %>/edit"
            class="btn btn-sm btn-outline-primary"
            >Edit</a
          >
          <form
            action="/admin/services/<%= s._id %>/delete"
            method="POST"
            class="d-inline"
            onsubmit="return confirm('Delete this service?')"
          >
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </td>
      </tr>
      <% }) %> <% } else { %>
      <tr>
        <td colspan="6" class="text-center text-muted">No services yet.</td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>
<%- include('../partials/admin-footer') %>
